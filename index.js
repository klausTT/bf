import d from'fastify';var o=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,s)=>(typeof require<"u"?require:t)[s]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var n=d({logger:true});n.register(o("@fastify/redis"),{host:"127.0.0.1",port:6379});var a=[],u=1;n.post("/items",async(e,t)=>{let s=e.body;if(!s.name)return t.status(400).send({error:"Name is required"});let r={id:u++,name:s.name};return a.push(r),t.status(201).send(r)});n.get("/items",async()=>{let{redis:e}=n;return e.get("name")});n.get("/items/:id",async(e,t)=>{let s=parseInt(e.params.id),r=a.find(i=>i.id===s);return r||t.status(404).send({error:"Item not found"})});n.put("/items/:id",async(e,t)=>{let s=parseInt(e.params.id),r=e.body,i=a.findIndex(m=>m.id===s);return i===-1?t.status(404).send({error:"Item not found"}):(a[i].name=r.name||a[i].name,a[i])});n.delete("/items/:id",async(e,t)=>{let s=parseInt(e.params.id),r=a.findIndex(m=>m.id===s);return r===-1?t.status(404).send({error:"Item not found"}):a.splice(r,1)[0]});n.get("/",async(e,t)=>({message:"Hello, Bun + Fastify1!"}));var c=async()=>{try{await n.listen({port:3e3}),console.log("Server is running on http://localhost:3000");}catch(e){n.log.error(e),process.exit(1);}};c();